class TecartCookieBanner{constructor(cookieBannerData,cookieBannerScripts,cookieBannerCategories,cookieBannerCategoriesData){this.cookieBannerData=cookieBannerData;this.cookieBannerScripts=cookieBannerScripts;this.cookieBannerCategories=cookieBannerCategories;this.cookieBannerCategoriesData=cookieBannerCategoriesData;if(this.cookieBannerScripts==null){this.cookieBannerScripts=[]}if(this.cookieBannerCategories==null){this.cookieBannerCategories=[]}if(this.cookieBannerCategoriesData==null){this.cookieBannerCategoriesData=[]}if(this.cookieConsentCategoriesArray==null){this.cookieConsentCategoriesArray=new Map}if(this.cookieConsentScriptsArray==null){this.cookieConsentScriptsArray=new Map}if(this.cookieConsentOnScrollScriptsArray==null){this.cookieConsentOnScrollScriptsArray=new Map}this.cookieConsent=this.getCookieByName("cookieconsent_status");this.cookieConsentScripts=this.getCookieByName("cookieconsent_scripts");this.cookieConsentCategories=this.getCookieByName("cookieconsent_categories");this.cookieConsentOnScrollScripts=this.getCookieByName("cookieconsent_onscroll_scripts");this.cookieConsentScrolled=this.getCookieByName("cookieconsent_scrolled")}init(){let buttonSettings="";if(this.getCookieBannerContent(this.cookieBannerData).buttonSettingsActive=="activated"){buttonSettings='<a aria-label="settings" role="button" tabIndex="0" class="button cc-btn cc-setting tcb-settings-btn '+this.getCookieBannerContent(this.cookieBannerData).buttonSettingsLayout+'" id="tcb-settings">'+this.getCookieBannerContent(this.cookieBannerData).settings+"</a>"}let buttonDeny="";if(this.getCookieBannerContent(this.cookieBannerData).buttonDenyActive=="activated"){buttonDeny='<a aria-label="deny cookies" role="button" tabIndex="0" class="button cc-btn cc-deny '+this.getCookieBannerContent(this.cookieBannerData).buttonDenyLayout+'">'+this.getCookieBannerContent(this.cookieBannerData).deny+"</a>"}const cookieconsentInitialse={position:"bottom-left",type:"opt-in",palette:{popup:{background:"#f6f9fc",text:"#1e2022",border:"#1e2022"},button:{background:"#fff",text:"#5a5f69",border:"#5a5f69"}},layout:"tecart-cookie-banner",layouts:{"tecart-cookie-banner":'<div id="tecart-cookie-banner">'+'<div class="cc-header">'+this.getCookieBannerContent(this.cookieBannerData).header+"</div>"+'<div id="cookieconsent:desc" class="cc-message">'+this.getCookieBannerContent(this.cookieBannerData).message+"</div>"+'<div class="cc-compliance cc-highlight">'+'<a aria-label="allow cookies" role="button" tabIndex="0" class="button cc-btn cc-allow '+this.getCookieBannerContent(this.cookieBannerData).buttonAcceptLayout+'">'+this.getCookieBannerContent(this.cookieBannerData).allow+"</a>"+buttonSettings+buttonDeny+"</div>"+"</div>"},revokable:true,animateRevokable:true,revokeBtn:'<div class="cc-revoke cc-bottom cc-left cc-animate cc-revoke-from-plugin" style="color: '+this.getCookieBannerContent(this.cookieBannerData).buttonRevokableTextColor+"; background-color: "+this.getCookieBannerContent(this.cookieBannerData).buttonRevokableColor+"; border-color: "+this.getCookieBannerContent(this.cookieBannerData).buttonRevokableColor+';">'+this.getCookieBannerContent(this.cookieBannerData).revoke+"</div>",onStatusChange:function(status,chosenBefore){const didConsent=this.hasConsented();const tcb=new TecartCookieBanner(this.cookieBannerData,this.cookieBannerScripts,this.cookieBannerCategories);if(didConsent){tcb.allowAllCookies()}else if(didConsent===false){tcb.denyAllCookies()}else{tcb.allowSettingsCookies()}},onRevokeChoice:function(status){}};window.cookieconsent.initialise(cookieconsentInitialse);if(this.cookieConsent==="dismiss"){this.createScriptCode(this.cookieConsentScripts)}else{this.setCookieConsentCategoriesArray();this.setCookieConsentScriptsArray()}this.removeSettingsModal();this.createSettingsModal(this.cookieConsent)}allowAllCookies(){const expires=this.cookieExpireDate();document.cookie="cookieconsent_status=allow;"+expires+";path=/";console.log("All scripts for this website have been activated in this browser.");window.location.reload()}denyAllCookies(){this.deleteAllCookies();this.removeCodeTags();const expires=this.cookieExpireDate();document.cookie="cookieconsent_status=deny;"+expires+";path=/";console.log("All scripts for this website have been deactivated in this browser.");window.location.reload()}allowSettingsCookies(){const expires=this.cookieExpireDate();document.cookie="cookieconsent_status=dismiss;"+expires+";path=/";console.log("All scripts for this website have set like in settings in this browser.")}setScrolledCookie(){const expires=this.cookieExpireDate();document.cookie="cookieconsent_scrolled=scrolled;"+expires+";path=/";console.log("Page was scrolled.")}setConsentCategoriesToCookie(cookieConsentCategoriesArray){if(cookieConsentCategoriesArray instanceof Map){cookieConsentCategoriesArray=Array.from(cookieConsentCategoriesArray)}const expires=this.cookieExpireDate();const json_string=JSON.stringify(cookieConsentCategoriesArray);document.cookie="cookieconsent_categories="+json_string+";"+expires+";path=/; SameSite=Lax;"}setConsentScriptsToCookie(cookieConsentScriptsArray){if(cookieConsentScriptsArray instanceof Map){cookieConsentScriptsArray=Array.from(cookieConsentScriptsArray)}const expires=this.cookieExpireDate();const json_string=JSON.stringify(cookieConsentScriptsArray);document.cookie="cookieconsent_scripts="+json_string+";"+expires+";path=/; SameSite=Lax;"}setConsentOnScrollScriptsToCookie(cookieConsentOnScrollScriptsArray){if(cookieConsentOnScrollScriptsArray instanceof Map){cookieConsentOnScrollScriptsArray=Array.from(cookieConsentOnScrollScriptsArray)}const expires=this.cookieExpireDate();const json_string=JSON.stringify(cookieConsentOnScrollScriptsArray);document.cookie="cookieconsent_onscroll_scripts="+json_string+";"+expires+";path=/; SameSite=Lax;"}cookieExpireDate(){const d=new Date;d.setTime(d.getTime()+365*24*60*60*1e3);const expires="expires="+d.toUTCString();return expires}deleteAllCookies(){const cookies=document.cookie.split("; ");for(let c=0;c<cookies.length;c++){const d=window.location.hostname.split(".");while(d.length>0){const cookieBase=encodeURIComponent(cookies[c].split(";")[0].split("=")[0])+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; domain="+d.join(".")+" ;path=";const p=location.pathname.split("/");document.cookie=cookieBase+"/";while(p.length>0){document.cookie=cookieBase+p.join("/");p.pop()}d.shift()}}window.localStorage.clear();console.log("all cookies cleared")}getCookieByName(name){const b=document.cookie.match("(^|[^;]+)\\s*"+name+"\\s*=\\s*([^;]+)");return b?b.pop():""}deleteCookieByName(name){document.cookie=name+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;";console.log(name+" cookie deletetd")}setCookieConsentCategoriesArray(){let title;const json_data=this.cookieBannerCategories;if(json_data.length>0){for(let i=0;i<json_data.length;i++){if(this.cookieConsent==="allow"){title=encodeURIComponent(json_data[i].category_title);this.cookieConsentCategoriesArray.set(title,{allowed:true});this.addScriptsFromAllowedCatToCookie(json_data[i].category_title)}else{if(json_data[i].category_cookies==="activated"){title=encodeURIComponent(json_data[i].category_title);this.cookieConsentCategoriesArray.set(title,{allowed:true});this.addScriptsFromAllowedCatToCookie(json_data[i].category_title)}}}}this.setConsentCategoriesToCookie(this.cookieConsentCategoriesArray);return this.cookieConsentCategoriesArray}setCookieConsentScriptsArray(){let title;const json_data=this.cookieBannerScripts;if(json_data.length>0){for(let i=0;i<json_data.length;i++){if(this.cookieConsent==="allow"){title=encodeURIComponent(json_data[i].script_title);this.cookieConsentScriptsArray.set(title,{allowed:true})}else{if(json_data[i].script_cookies_standard==="activated"){title=encodeURIComponent(json_data[i].script_title);this.cookieConsentScriptsArray.set(title,{allowed:true})}}}}this.setConsentScriptsToCookie(this.cookieConsentScriptsArray);const data=this.cookieConsentScriptsArray;this.createScriptCode(data)}addScriptsFromAllowedCatToCookie(catTitleEncoded){const getCatScripts=this.getElementByValue(this.cookieBannerScripts,"script_category",catTitleEncoded);for(let i=0;i<getCatScripts.length;i++){const title=encodeURIComponent(getCatScripts[i].script_title);this.cookieConsentScriptsArray.set(title,{allowed:true})}}createScriptCode(data){let cookieArray=[];if(data!==null){if(data instanceof Map){data=JSON.stringify(Array.from(data))}cookieArray=JSON.parse(data)}const scriptArray=this.cookieBannerScripts;if(cookieArray.length>0&&scriptArray.length>0){for(let i=0;i<cookieArray.length;i++){const cookieScriptTitleEncoded=cookieArray[i][0];const cookieScriptTitle=decodeURIComponent(cookieScriptTitleEncoded);if(scriptArray.length>0&&cookieScriptTitle!==""){for(let x=0;x<scriptArray.length;x++){if(scriptArray[x].script_title===cookieScriptTitle){if(scriptArray[x].script_codes){const codes=scriptArray[x].script_codes;for(let y=0;y<codes.length;y++){this.createCodeTag(codes[y],cookieScriptTitleEncoded,cookieScriptTitle)}}}}}}}this.setConsentOnScrollScriptsToCookie(this.cookieConsentOnScrollScriptsArray)}createCodeTag(data,scriptTitleEncoded,scriptTitle){const code=JSON.stringify(data);if(code.length>0){const codeContent=data.code_title;const codePos=data.code_position;const codeTag=data.code_tag;const codeLoadTimeout=data.code_load_with_timeout;const codeLoadTimeoutTime=data.code_load_with_timeout_time;const codeLoadOnScroll=data.code_load_on_scroll;const codeLoadOnScrollPercent=data.code_load_on_scroll_percent;const codeLoadOnPages="code_load_on_pages"in data?data.code_load_on_pages:[];const currPagePath=window.location.pathname;let pageAllowed=true;if(codeLoadOnPages.length>0&&codeLoadOnPages.indexOf(currPagePath)===-1){pageAllowed=false}let codeItem="";if(codeTag==="noscript"){codeItem=document.createElement("noscript")}else{codeItem=document.createElement("script");codeItem.setAttribute("type","text/javascript")}codeItem.setAttribute("data-title",scriptTitle.trim());codeItem.setAttribute("data-tcb",scriptTitleEncoded);codeItem.setAttribute("data-position",codePos);codeItem.innerHTML=codeContent.trim();if(pageAllowed){if(this.cookieConsentScrolled==="scrolled"){const self=this;if(codeLoadTimeout==="1"){setTimeout(function(){self.addScriptTagToDOM(codePos,codeItem)},codeLoadTimeoutTime)}else{self.addScriptTagToDOM(codePos,codeItem)}}else{if(codeLoadOnScroll==="1"){this.cookieConsentOnScrollScriptsArray.set(scriptTitleEncoded,{allowed:true})}else if(codeLoadTimeout==="1"&&codeLoadOnScroll==="0"){const self=this;setTimeout(function(){self.addScriptTagToDOM(codePos,codeItem)},codeLoadTimeoutTime)}else{this.addScriptTagToDOM(codePos,codeItem)}}}}}addScriptTagToDOM(codePos,codeItem){if(codePos==="head"){document.head.append(codeItem)}else if(codePos==="body-top"){document.body.prepend(codeItem)}else{document.body.appendChild(codeItem)}}removeCodeTagByTitle(dataTitle){if(dataTitle!==""){const tags=document.querySelectorAll("[data-tcb]");for(const i in tags){if(tags.hasOwnProperty(i)){if(tags[i].getAttribute("data-tcb")===dataTitle){tags[i].remove()}}}}}removeCodeTags(){const tags=document.querySelectorAll("[data-tcb]");for(const i in tags){if(tags.hasOwnProperty(i)){tags[i].remove()}}}createSettingsModal(status=""){const settingsModal='<div id="tcb-settings-modal" class="tcb-settings-modal" style="display: none;">'+'<div id="tcb-settings-close-btn">&times;</div>'+'<div class="tcb-settings-modal-header">'+'<div class="cc-header">'+this.getCookieBannerContent(this.cookieBannerData).settingsTitle+"</div>"+"</div>\n"+'<div class="tcb-settings-modal-content">'+this.createSettingsModalTabs(status)+"</div>"+"</div>";document.body.insertAdjacentHTML("beforeend",settingsModal)}removeSettingsModal(){const modalWindow=document.getElementById("tcb-settings-modal");if(modalWindow!==null){modalWindow.remove()}}createSettingsModalTabs(status=""){let tabSection="";let tabSaveSettings="";let article="";const json_data=this.cookieBannerCategories;if(json_data.length>0){for(let i=0;i<json_data.length;i++){if(this.cookieBannerScripts.length>0){article=this.createSettingsModalTabsScripts(json_data[i].category_title,status)}const catText=json_data[i].category_text?json_data[i].category_text:"";const catTitle=json_data[i].category_title?json_data[i].category_title:"";const catTitleEncoded=encodeURIComponent(catTitle);let activated="";if(status==="allow"){activated="checked"}else if(this.cookieConsentCategories.length>0){if(this.cookieConsentCategories.includes(catTitleEncoded)===true){activated="checked"}}else{if(json_data[i].category_cookies==="activated"){activated="checked"}}let cat_toggler="";if(json_data[i].category_cookies==="activated"){cat_toggler='<label class="tcb-switch tcb-categories-switch">'+'<input type="checkbox" '+activated+' id="cat_'+catTitleEncoded+'" value="'+catTitleEncoded+'"  name="tcbCookieCategories"  />'+'<span class="tcb-slider tcb-round"></span>'+"</label>"}const checkedTab=i===0?'checked=""':"";tabSection+='<section id="section'+i+'">'+'<input type="radio" name="sections" id="option'+i+'" '+checkedTab+" />"+'<label for="option'+i+'">'+json_data[i].category_title+"</label>"+"<article>"+'<div class="tcb-tabs-cat-title">'+"<p>"+catTitle+"</p>"+cat_toggler+"</div>"+"<p>"+catText+"</p>"+article+"</article>"+"</section>"}}else{return this.getCookieBannerContent(this.cookieBannerData).settingsEmpty}let tabSaveSettingsText="Save Settings";if(this.cookieBannerCategoriesData.categories_save_text){tabSaveSettingsText=this.cookieBannerCategoriesData.categories_save_text}let tabSaveSettingsLayout="layout-1";if(this.cookieBannerCategoriesData.categories_save_layout){tabSaveSettingsLayout=this.cookieBannerCategoriesData.categories_save_layout}const tabs='<div id="tcbSettings" class="tcb-catTabs">'+tabSection+"</div>"+'<div class="tcb-saveSettings">'+'<a id="tcb-save-settings-btn" aria-label="save settings" role="button" tabIndex="0" class="button cc-btn '+tabSaveSettingsLayout+'">'+tabSaveSettingsText+"</a>"+"</div>";return tabs}createSettingsModalTabsScripts(categoryTitle="",status=""){let tabScripts="";if(categoryTitle!==""&&this.cookieBannerScripts.length>0){const tabScriptItems=this.getElementByValue(this.cookieBannerScripts,"script_category",categoryTitle);if(tabScriptItems.length>0){tabScripts+="<ul>";for(let x=0;x<tabScriptItems.length;x++){const scriptTitle=tabScriptItems[x].script_title?tabScriptItems[x].script_title:"";const scriptTitleEncoded=encodeURIComponent(scriptTitle);let activated="";if(status==="allow"){activated="checked"}else if(this.cookieConsentScripts.length>0){if(this.cookieConsentScripts.includes(scriptTitleEncoded)===true){activated="checked"}}else{if(tabScriptItems[x].script_cookies_standard==="activated"){activated="checked"}}let readonly="";let readonlyClass="";let name="tcbCookieScripts";if(tabScriptItems[x].script_cookies==="0"){readonly='disabled="disabled"';readonlyClass="disabled";name="tcbDisabledCookieScripts"}tabScripts+="<li>"+'<div class="tcb-script-title">'+scriptTitle+"</div>"+'<label class="tcb-switch tcb-script-switch '+readonlyClass+'">'+'<input type="checkbox" '+activated+' id="script_'+scriptTitleEncoded+'" value="'+scriptTitleEncoded+'"  name="'+name+'" '+readonly+" />"+'<span class="tcb-slider tcb-round"></span>'+"</label>"+'<div class="tcb-script-text">'+tabScriptItems[x].script_text+"</div>"+"</li>"}tabScripts+="</ul>"}}return tabScripts}onCheckboxSettings(){this.deleteCookieByName("cookieconsent_scripts");this.deleteCookieByName("cookieconsent_categories");this.deleteAllCookies();let selectedScripts=[];let selectedCats=[];let catScripts=[];this.cookieConsentScriptsArray=new Map;selectedScripts=Array.from(document.querySelectorAll("input[name=tcbCookieScripts], input[name=tcbDisabledCookieScripts]")).filter(checkbox=>checkbox.checked).map(checkbox=>checkbox.value);if(selectedScripts.length>0){for(let i=0;i<selectedScripts.length;i++){this.cookieConsentScriptsArray.set(selectedScripts[i],{allowed:true})}}selectedCats=Array.from(document.querySelectorAll("input[name=tcbCookieCategories]")).filter(checkbox=>checkbox.checked).map(checkbox=>checkbox.value);if(selectedCats.length>0){for(let i=0;i<selectedCats.length;i++){this.cookieConsentCategoriesArray.set(selectedCats[i],{allowed:true});this.addScriptsFromAllowedCatToCookie(decodeURIComponent(selectedCats[i]))}}this.setConsentOnScrollScriptsToCookie(this.cookieConsentOnScrollScriptsArray);this.cookieConsentOnScrollScripts=this.getCookieByName("cookieconsent_onscroll_scripts");this.setConsentCategoriesToCookie(this.cookieConsentCategoriesArray);this.setConsentScriptsToCookie(this.cookieConsentScriptsArray);this.allowSettingsCookies();this.removeCodeTags();const data=this.cookieConsentScriptsArray;this.createScriptCode(data);window.location.reload()}onScrollIncludes(){if(this.cookieConsentScrolled!=="scrolled"){this.cookieConsentScrolled="scrolled";this.cookieConsentOnScrollScripts=this.getCookieByName("cookieconsent_onscroll_scripts");this.setScrolledCookie();this.createScriptCode(this.cookieConsentOnScrollScripts)}}getElementByValue(data,key,value){return data.filter(function(object){return object[key]===value})}getCookieBannerContent(cookieBannerData){const cookieContent={};cookieContent.header="Cookies used on the website!";cookieContent.allow="Allow";cookieContent.deny="Deny";cookieContent.denyActive="activated";cookieContent.message="This website uses cookies to ensure you get the best experience on our website.";cookieContent.settings="Settings";cookieContent.settingsEmpty="There are no settings available.";cookieContent.settingsActive="activated";cookieContent.revoke="Cookie Policy";cookieContent.buttonRevokableColor="#7faf34";cookieContent.buttonRevokableTextColor="#ffffff";cookieContent.settingsTitle="Your personal settings";if(cookieBannerData!=null){if(cookieBannerData.banner_title){cookieContent.header=cookieBannerData.banner_title}if(cookieBannerData.button_deny_text){cookieContent.deny=cookieBannerData.button_deny_text}if(cookieBannerData.button_accept_text){cookieContent.allow=cookieBannerData.button_accept_text}if(cookieBannerData.banner_text){cookieContent.message=cookieBannerData.banner_text}if(cookieBannerData.button_settings_text){cookieContent.settings=cookieBannerData.button_settings_text}if(cookieBannerData.button_settings_empty){cookieContent.settingsEmpty=cookieBannerData.button_settings_empty}if(cookieBannerData.banner_revokable_text){cookieContent.revoke=cookieBannerData.banner_revokable_text}if(cookieBannerData.button_revokable_color){cookieContent.buttonRevokableColor=cookieBannerData.button_revokable_color}if(cookieBannerData.button_revokable_color){cookieContent.buttonRevokableTextColor=cookieBannerData.button_revokable_text_color}if(cookieBannerData.banner_cat_title){cookieContent.settingsTitle=cookieBannerData.banner_cat_title}cookieContent.buttonDenyLayout=cookieBannerData.button_deny_layout;cookieContent.buttonDenyActive=cookieBannerData.button_deny_active;cookieContent.buttonSettingsLayout=cookieBannerData.button_settings_layout;cookieContent.buttonSettingsActive=cookieBannerData.button_settings_active;cookieContent.buttonAcceptLayout=cookieBannerData.button_accept_layout}return cookieContent}}